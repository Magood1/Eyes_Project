# FILE: README.md

# نظام تشخيص أمراض العيون (Ocular Diagnosis System) - الإصدار 4.0

هذا المشروع هو إطار عمل متكامل وجاهز للإنتاج لتدريب وتقييم نماذج التعلم العميق لتصنيف صور قاع العين.

## الميزات الرئيسية

- **إطار عمل موحد:** تدريب نموذج متعدد الفئات أو أي من النماذج الثنائية المتخصصة الستة عبر قاعدة كود واحدة.
- **خط أنابيب بيانات مُحسَّن:** يعتمد على **المعالجة المسبقة دون اتصال (Offline Preprocessing)** إلى تنسيق `TFRecord`، مما يضمن أقصى أداء للتدريب ويقضي على اختناقات وحدة المعالجة المركزية.
- **موثوقية وقابلية إعادة الإنتاج:** يتم التحكم في كل تجربة عبر ملفات `YAML`، ويتم إنشاء **ملف بيان (manifest.json)** لكل عملية تدريب لضمان التتبع الكامل.
- **استراتيجيات معالجة مسبقة معيارية:** استخدام نمط تصميم الاستراتيجية لفصل منطق معالجة الصور لكل مرض.
- **جاهزية للنشر:** يدعم حفظ النماذج بتنسيق `SavedModel` القياسي، مما يسهل عملية النشر.

## كيفية تشغيل المشروع (سير العمل الموصى به)

### الخطوة 1: إعداد البيئة


```bash
# تثبيت جميع المكتبات المطلوبة
pip install -r requirements.txt
ملاحظة: تأكد من إعداد بيانات اعتماد Kaggle API لتنزيل مجموعة البيانات.


الخطوة 2: المعالجة المسبقة دون اتصال (Offline Preprocessing)
هذه الخطوة يتم تشغيلها مرة واحدة لكل نوع من أنواع النماذج لإعداد البيانات.

# مثال لمعالجة بيانات نموذج السكري
python preprocess_to_tfrecord.py --config configs/binary/01_diabetes.yaml

# مثال لمعالجة بيانات النموذج متعدد الفئات
python preprocess_to_tfrecord.py --config configs/multi_class_config.yaml
سيتم حفظ المخرجات في مجلد data/tfrecords/.
الخطوة 3: بدء التدريب
استخدم ملف التكوين المقابل للبيانات التي قمت بمعالجتها.

# لتدريب نموذج السكري
python train.py --config configs/binary/01_diabetes.yaml
الخطوة 4: تقييم النموذج
استخدم ملف التكوين ومسار الأوزان/النموذج المحفوظ.

# لتقييم نموذج السكري المحفوظ كأوزان
python evaluate.py --config configs/binary/01_diabetes.yaml --weights experiments/binary/diabetes_resnet50_v4/final_model_weights.h5

# لتقييم نموذج السكري المحفوظ كـ SavedModel
python evaluate.py --config configs/binary/01_diabetes.yaml --saved_model experiments/binary/diabetes_resnet50_v4/final_model_savedmodel

لخطوة 5: تشغيل الاختبارات الأساسية
للتأكد من سلامة البنية الأساسية للمشروع.
pytest